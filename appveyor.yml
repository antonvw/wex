version: 3.1.0.{build}

branches:
  only:
    - master

clone_folder: c:\projects\wxex

platform:
  - x86

configuration:
  - Release

install:
  - ps: Start-FileDownload 'http://sourceforge.net/projects/syncped/files/wxWidgets-3.1.0-include.7z'
  - ps: Start-FileDownload 'http://sourceforge.net/projects/syncped/files/wxWidgets-3.1.0-lib.7z'
  - ps: Start-FileDownload 'http://sourceforge.net/projects/syncped/files/wxWidgets-3.1.0-locale.7z'
  - cmd: 7z x wxWidgets-3.1.0-include.7z -oC:\wxWidgets
  - cmd: 7z x wxWidgets-3.1.0-lib.7z -oC:\wxWidgets
  - cmd: 7z x wxWidgets-3.1.0-locale.7z -oC:\wxWidgets

before_build:
  - mkdir build
  - ps: cd build
  - cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_PROGRAM_PATH=C:\cygwin\bin -DBUILD_TEST=ON ..

build_script:
  - msbuild ALL_BUILD.vcxproj /p:Configuration=Release
  - ctest -V
  - ..\build.bat

test: OFF

artifacts:
  - path: 'build\syncped-v3.1.0.zip'
